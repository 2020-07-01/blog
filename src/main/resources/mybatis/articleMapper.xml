<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >

<mapper namespace="com.example.blog.dao.ArticleDao">

    <!--sql语句-->
    <sql id="base_sql">
        a_id,title,content,category,summary,create_date,edit_date
    </sql>

    <!--结果映射-->
    <resultMap id="resultMap" type="com.example.blog.entity.Article">
        <id column="a_id" property="aId" jdbcType="VARCHAR"/>
        <result column="title" property="title" jdbcType="VARCHAR"/>
        <result column="content" property="content" jdbcType="VARCHAR"/>
        <result column="create_date" property="createDate" jdbcType="VARCHAR"/>
        <result column="edit-date" property="editDate" jdbcType="VARCHAR"/>

        <!--此处使用连表查询,进行结果结果集的影射-->
        <association property="category" javaType="com.example.blog.entity.Category">
            <id column="c_id" property="cId" jdbcType="VARCHAR"/>
            <result column="category_name" property="categoryName" jdbcType="VARCHAR"/>
            <result column="display_name" property="displayName" jdbcType="VARCHAR"/>
        </association>
    </resultMap>

    <!--查询所有的博客-->
    <select id="selectAll" resultMap="resultMap">
        select
        <include refid="base_sql"/>
        from article
    </select>


    <!--根据id删除博客-->
   <!-- <delete id="deleteBlog">
        delete from article where a_id = #{aId}
    </delete>


    &lt;!&ndash;根据id查询博客&ndash;&gt;
    <select id="selectById" parameterType="String" resultMap="resultMap">
        select
        <include refid="base_sql"/>
        from article
        where a_id = #{aId};
    </select>


    &lt;!&ndash;保存博客&ndash;&gt;
    <insert id="saveBlog" parameterType="com.example.blog.entity.Article">
        insert into article (a_id,title,content,category,summary,create_date)
        values (#{aId},#{title},#{content},#{category.categoryName},#{summary},#{createDate})

    </insert>-->

</mapper>
